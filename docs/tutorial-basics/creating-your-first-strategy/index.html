<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tutorial-basics/creating-your-first-strategy" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">Creating your first strategy | Yuan - Quantitative Strategy Platform Based on ChatGPT</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.y.ntnl.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.y.ntnl.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://docs.y.ntnl.com/docs/tutorial-basics/creating-your-first-strategy"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="Quant, Trade, LLM, AI, Quantitative Strategy"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Creating your first strategy | Yuan - Quantitative Strategy Platform Based on ChatGPT"><meta data-rh="true" name="description" content="Claude Elwood Shannon was an American mathematician, electrical engineer, and cryptographer known as &quot;the father of information theory&quot;. He found a simple investment strategy that can be used to beat the market. The strategy is called the Shannon&#x27;s Rebalance, Shannon&#x27;s Demon or Shannon&#x27;s Infinite Grid_."><meta data-rh="true" property="og:description" content="Claude Elwood Shannon was an American mathematician, electrical engineer, and cryptographer known as &quot;the father of information theory&quot;. He found a simple investment strategy that can be used to beat the market. The strategy is called the Shannon&#x27;s Rebalance, Shannon&#x27;s Demon or Shannon&#x27;s Infinite Grid_."><link data-rh="true" rel="icon" href="/img/yuan.svg"><link data-rh="true" rel="canonical" href="https://docs.y.ntnl.com/docs/tutorial-basics/creating-your-first-strategy"><link data-rh="true" rel="alternate" href="https://docs.y.ntnl.com/docs/tutorial-basics/creating-your-first-strategy" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.y.ntnl.com/zh-Hans/docs/tutorial-basics/creating-your-first-strategy" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://docs.y.ntnl.com/docs/tutorial-basics/creating-your-first-strategy" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Yuan - Quantitative Strategy Platform Based on ChatGPT RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Yuan - Quantitative Strategy Platform Based on ChatGPT Atom Feed">




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<script src="https://www.googletagmanager.com/gtag/js?id=G-Z8KKJBPT59" async></script>
<script src="/head_script.js"></script><link rel="stylesheet" href="/assets/css/styles.f7544afe.css">
<script src="/assets/js/runtime~main.ddb4e85d.js" defer="defer"></script>
<script src="/assets/js/main.a8ecc981.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_snqU" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/yuan.svg" alt="Yuan Logo" class="themedComponent_CYBL themedComponent--light__Pv9"><img src="/img/yuan.svg" alt="Yuan Logo" class="themedComponent_CYBL themedComponent--dark_J5sw"></div><b class="navbar__title text--truncate">Yuan</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_DzPK"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/tutorial-basics/creating-your-first-strategy" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh-Hans/docs/tutorial-basics/creating-your-first-strategy" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-Hans">简体中文</a></li></ul></div><a href="https://github.com/No-Trade-No-Life/Yuan" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_EUDJ colorModeToggle_sLx5"><button class="clean-btn toggleButton_o75C toggleButtonDisabled_a1IR" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_Ip7a"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon__h4y"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_pfDt"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_LsAE"><div class="docsWrapper_eyiT"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_fL1X" type="button"></button><div class="docRoot_q9aM"><aside class="theme-doc-sidebar-container docSidebarContainer_Qgp2"><div class="sidebarViewport_UYlu"><div class="sidebar_z5uq"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_doPI"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/getting-start">Getting Start</a><button aria-label="Collapse sidebar category &#x27;Getting Start&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/tutorial-basics/creating-your-first-strategy">Creating your first strategy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial-basics/real-world-trading">Real world trading</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/basic-concepts">Basic Concepts</a><button aria-label="Expand sidebar category &#x27;Basic Concepts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/guide---agent">Guide - Agent</a><button aria-label="Expand sidebar category &#x27;Guide - Agent&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/reference">Reference</a><button aria-label="Expand sidebar category &#x27;Reference&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_bMDW"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_vxj0"><div class="docItemContainer_jlfW"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_PrKV" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_mUIY"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/getting-start"><span itemprop="name">Getting Start</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Creating your first strategy</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_dKQ_ theme-doc-toc-mobile tocMobile_SCwD"><button type="button" class="clean-btn tocCollapsibleButton_aTSs">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Creating your first strategy</h1>
<p><a href="https://en.wikipedia.org/wiki/Claude_Shannon" target="_blank" rel="noopener noreferrer">Claude Elwood Shannon</a> was an American mathematician, electrical engineer, and cryptographer known as &quot;the father of information theory&quot;. He found a simple investment strategy that can be used to beat the market. The strategy is called the <em>Shannon&#x27;s Rebalance</em>, <em>Shannon&#x27;s Demon</em> or <em>Shannon&#x27;s Infinite Grid</em>.</p>
<p>The key idea is to rebalance your portfolio in regular. The rebalancing is done by selling the assets that have grown in value and buying the assets that have fallen in value.</p>
<p>It&#x27;s very easy to understand and implement. Let us introduce the strategy in detail.</p>
<p>A classic instance is keep 50% currency and 50% position.</p>
<p>For example, if you have 1000 USD to invest Gold. You can buy 500 USD Gold and keep 500 USD currency.
Always re-evaluate the value of Gold and currency, do re-balancing if need, keep 50% Gold and 50% currency.
If Gold price goes up, you sell some Gold to keep the balance.
If Gold price goes down, you buy Gold to keep the balance.
In long term, even if gold price doesn&#x27;t raise, you can still make profit by re-balancing.</p>
<p>Let&#x27;s see how to implement and test this strategy in the following sections.</p>
<h2 class="anchor anchorWithStickyNavbar_J_4P" id="open-your-workspace">Open your workspace<a href="#open-your-workspace" class="hash-link" aria-label="Direct link to Open your workspace" title="Direct link to Open your workspace">​</a></h2>
<p>First, open your workspace. If you don&#x27;t have one, please create one.</p>
<p>If you are accessing Yuan in desktop device, please follow the steps below:</p>
<ol>
<li>Click the &quot;Open Workspace...&quot; button on the home page.</li>
<li>Read the privacy declaration and click &quot;Agree&quot; button.</li>
<li>Select a local folder as your workspace folder. Recommend to use an empty folder.</li>
<li>Confirm to import the example project. It&#x27;s important to import some utils.</li>
<li>Click the &quot;Explorer&quot; on the left panel, you will see the workspace folder. (That&#x27;s the folder you selected in step 3)</li>
<li>You can find some folders and files in the workspace folder now.</li>
<li>Well done! We will work in this workspace later.</li>
</ol>
<p>If you are accessing the website from a mobile device (or you cannot find &quot;Open Workspace&quot; button), your device doesn&#x27;t support to open a local folder, please follow the steps below:</p>
<ol>
<li>Click the &quot;Explorer&quot; on the left panel, you will see the workspace folder. It&#x27;s empty by default.</li>
<li>Click the &quot;Import Examples&quot; button on the top of Explorer panel. It&#x27;s import to import some utils.</li>
<li>You can find some folders and files in the workspace folder now.</li>
<li>Well done! We will work in this workspace later.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_J_4P" id="create-a-new-agent">Create a new agent<a href="#create-a-new-agent" class="hash-link" aria-label="Direct link to Create a new agent" title="Direct link to Create a new agent">​</a></h2>
<p>Trading strategy is named as &quot;agent&quot; in Yuan. Let&#x27;s create a new agent.</p>
<ol>
<li>Tap the mouse on the &quot;...&quot; button of the root folder in the Explorer panel.</li>
<li>Click the &quot;Create File&quot; button.</li>
<li>Input the file name as <code>shannon.ts</code>. (or any other name you like, but the file extension must be <code>.ts</code>)</li>
<li>You can see the new file <code>shannon.ts</code> in the Explorer panel now.</li>
<li>Tap the mouse on the &quot;...&quot; button of the <code>shannon.ts</code> file.</li>
<li>Click the &quot;Editor&quot; button, so we can open a editor.</li>
<li>Well done! We will write the code in this editor later.</li>
</ol>
<div class="theme-admonition theme-admonition-tip admonition_cM0L alert alert--success"><div class="admonitionHeading_MeOY"><span class="admonitionIcon_iwjQ"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_KAnW"><p>You can also use your favorite editor (e.g. VSCode) to edit the file. Yuan will detect the file change and reload the agent automatically.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_J_4P" id="time-to-hello-world">Time to hello world<a href="#time-to-hello-world" class="hash-link" aria-label="Direct link to Time to hello world" title="Direct link to Time to hello world">​</a></h2>
<p>Now, let&#x27;s write the code in the editor. The following code is a basic framework of an agent.</p>
<div class="language-ts codeBlockContainer_DvXE theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_wmhv"><pre tabindex="0" class="prism-code language-ts codeBlock_HjIu thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QgY9"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">default</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Hello, World!&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_tsci"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Jkiu" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_feJ5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_iAcl"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol>
<li>Tap the mouse on the &quot;...&quot; button of the <code>shannon.ts</code> file.</li>
<li>Click the &quot;Run Agent&quot; button, so we can open the agent configuration form.</li>
<li>It&#x27;s a complex form, but we can ignore it now. Just click the &quot;Run&quot; button.</li>
<li>Instantly, you can see &quot;Run completed&quot; message on the top of page and &quot;Account Performance&quot; panel is shown.</li>
<li>Open the &quot;Outputs&quot; panel on the bottom of page, you can find the &quot;Hello, World!&quot; message. (maybe plenty of other irrelative messages)</li>
<li>&quot;Account Performance&quot; should be empty now, because we haven&#x27;t done any trading yet.</li>
<li>Well done! We have run our first agent.</li>
</ol>
<div class="theme-admonition theme-admonition-info admonition_cM0L alert alert--info"><div class="admonitionHeading_MeOY"><span class="admonitionIcon_iwjQ"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_KAnW"><p>You can find more details about the agent in the <a href="/docs/category/guide---agent">Guide - Agent</a> section.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_J_4P" id="implement-the-strategy">Implement the strategy<a href="#implement-the-strategy" class="hash-link" aria-label="Direct link to Implement the strategy" title="Direct link to Implement the strategy">​</a></h2>
<div class="theme-admonition theme-admonition-info admonition_cM0L alert alert--info"><div class="admonitionHeading_MeOY"><span class="admonitionIcon_iwjQ"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_KAnW"><p>The complete code can be found in <code>/@models/shannon.ts</code> of your workspace.
If you have trouble with coding. You can use it directly and skip this section.</p></div></div>
<p>Now, let&#x27;s implement the strategy step by step.</p>
<h3 class="anchor anchorWithStickyNavbar_J_4P" id="get-the-data">Get the data<a href="#get-the-data" class="hash-link" aria-label="Direct link to Get the data" title="Direct link to Get the data">​</a></h3>
<div class="language-ts codeBlockContainer_DvXE theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_wmhv"><pre tabindex="0" class="prism-code language-ts codeBlock_HjIu thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QgY9"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">default</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Define parameters of the agent</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> datasource_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useParamString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;DataSource&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Y&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> product_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useParamString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Product&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> period </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useParamString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Period&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;PT1H&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> currency </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useParamString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Currency&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;USD&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Get the product information and price data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> product </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useProduct</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">datasource_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> product_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> close </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useOHLC</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">datasource_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> product_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> period</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_tsci"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Jkiu" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_feJ5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_iAcl"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol>
<li>
<p>We use <code>useParamString</code> to get the parameters from the agent configuration form.</p>
<p>You can find the parameter in the &quot;Agent&quot; form after you click &quot;Refresh&quot; button on the top of &quot;Agent&quot; panel.</p>
</li>
<li>
<p>We use <code>useProduct</code> to get the product information.</p>
<p>The detail of product can be found in the <em><a href="/docs/basics/what-is-product">What is Product</a></em>.</p>
</li>
<li>
<p>We use <code>useOHLC</code> to get the price data. We only need the <code>close</code> price now.</p>
<p>Variable <code>close</code> is a series of price data. It&#x27;s almost a array of numbers.</p>
<p>&#x27;PT1H&#x27; is the period of the price data. It means 1 hour. It&#x27;s a string format of <a href="https://en.wikipedia.org/wiki/ISO_8601#Durations" target="_blank" rel="noopener noreferrer">ISO 8601 Duration</a>.</p>
<p>Some other examples: &#x27;PT1M&#x27; means 1 minute, &#x27;PT15M&#x27; means 15 minutes, &#x27;P1D&#x27; means 1 day, &#x27;P1W&#x27; means 1 week.</p>
</li>
</ol>
<p>Following the below steps to re-run the code:</p>
<ol>
<li>Open the &quot;Agent&quot; panel on the left of the page.</li>
<li>Click &quot;Refresh&quot; button on the top of &quot;Agent&quot; panel.</li>
<li>You can find the parameters defined above in the &quot;Agent params&quot; section.</li>
<li>You can see some default value of the parameters. You can change them if you like.</li>
<li>Fill the &quot;Product&quot; parameter with <code>XAUUSD</code>. It&#x27;s the product id of Gold.</li>
<li>Click &quot;Run&quot; button on the top of &quot;Agent&quot; panel.</li>
<li>Soon, you can see a new &quot;Account Performance&quot; panel is shown.</li>
<li>It&#x27;s still empty values in the &quot;Account Performance&quot; panel, because we haven&#x27;t done any trading yet.</li>
<li>Click &quot;Technical Chart&quot; button on the top of &quot;Account Performance&quot; panel.</li>
<li>You can see the price chart of Gold now.</li>
<li>Well done! We have got the data.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_J_4P" id="build-the-strategy">Build the strategy<a href="#build-the-strategy" class="hash-link" aria-label="Direct link to Build the strategy" title="Direct link to Build the strategy">​</a></h3>
<p>We need to monitor the price, calculate the expected position to hold. If the error of expected position and actual position is big enough, we can do re-balancing.</p>
<ol>
<li>Define the <strong>initial balance</strong> and <strong>threshold of error</strong> as parameters, so that you can adjust them without changing the code.</li>
<li>Use API <code>useAccountInfo</code> to get the account information. So we can get the equity of the account.</li>
<li>Use API <code>useSimplePositionManager</code> to get the current position and set the target position. It&#x27;s a simple position manager. It will do order operation to move your position to the target volume. It&#x27;s very useful for some simple strategies.</li>
<li>Define the <strong>total value</strong> is the sum of equity and initial balance. Because the initial equity of the account is zero. Yuan allow the account to have negative equity to show more details of the strategy.</li>
<li>The total value of the position is half of the total value. Because we want to keep 50% currency and 50% position.</li>
<li>We can infer the position volume to hold from the total value of the position and the price of the product.</li>
<li>Calculate the error rate of the expected position volume to actual.</li>
<li>Set target volume if the error rate is big enough.</li>
<li>Note that the position volume has a minimum step (<code>volume_step</code>). We need to round the order volume to the step.</li>
<li>Check the above every hour by use <code>useEffect</code> hook and set the second parameters with <code>[close.length]</code>.</li>
</ol>
<div class="language-ts codeBlockContainer_DvXE theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_wmhv"><pre tabindex="0" class="prism-code language-ts codeBlock_HjIu thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QgY9"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> useSimplePositionManager </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@libs&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">default</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// More parameters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> initial_balance </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useParamNumber</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Initial Balance&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100_000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> threshold </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useParamNumber</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Threshold&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Get the account information</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> accountInfo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useAccountInfo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> currency </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Use a simple position manager</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">actualVolume</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setVolume</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useSimplePositionManager</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">accountInfo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">account_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> product_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Re-balance the position</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">close</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">length </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> price </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> close</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">close</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">length </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> totalValue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> accountInfo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">money</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">equity </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> initial_balance</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> totalValueToHold </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> totalValue </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.5</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// infer the volume to hold</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> valuePerVolume </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value_scale </span><span class="token operator" style="color:#393A34">??</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value_scale_unit </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> price</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">quote_currency </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> accountInfo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">money</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">currency </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> price</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> expectedVolume </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> totalValueToHold </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> valuePerVolume</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// calculate the error rate</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> volume_step </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">volume_step </span><span class="token operator" style="color:#393A34">??</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> errorRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">abs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">actualVolume </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> expectedVolume</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> volume_step</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">errorRate </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> threshold</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setVolume</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">roundToStep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">expectedVolume</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> volume_step</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">close</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">length</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_tsci"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Jkiu" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_feJ5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_iAcl"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_J_4P" id="back-test-the-strategy">Back-test the strategy<a href="#back-test-the-strategy" class="hash-link" aria-label="Direct link to Back-test the strategy" title="Direct link to Back-test the strategy">​</a></h2>
<p>We have completed the agent code. Now, let&#x27;s back-test the strategy.</p>
<ol>
<li>Fill the &quot;Product&quot; parameter with <code>XAUUSD</code>. It&#x27;s the product id of Gold.</li>
<li>Click &quot;Run&quot; button on the top of &quot;Agent&quot; panel.</li>
<li>Soon, you can see a new &quot;Account Performance&quot; panel is shown.</li>
<li>Well done! We have back-tested the strategy in the product Gold.</li>
</ol>
<p><img loading="lazy" alt="Back-test Result of XAUUSD" src="/assets/images/1-08417cf65acbefd496cc0c09dc4baa5b.png" width="2561" height="1209" class="img_gONJ"></p>
<p>You can also back-test the strategy in other products. For example, you can back-test the strategy in the product <code>EURUSD</code>.</p>
<p><img loading="lazy" alt="Back-test Result of EURUSD" src="/assets/images/2-2f3630cafc7a84e4e07e5479b797cb09.png" width="2561" height="1212" class="img_gONJ"></p>
<ul>
<li>You can click the &quot;Technical Chart&quot; button on the top of &quot;Account Performance&quot; panel to view the trading detail of this strategy.</li>
<li>You can click the &quot;Order List&quot; button on the top of &quot;Account Performance&quot; panel to view the order list of this strategy.</li>
<li>If you want to deploy the strategy to real market, you can click the &quot;Deploy to Cloud&quot; button on the top of &quot;Agent&quot; panel.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_J_4P" id="further-reading">Further Reading<a href="#further-reading" class="hash-link" aria-label="Direct link to Further Reading" title="Direct link to Further Reading">​</a></h2>
<p>There are some other examples in the <code>/@models</code> folder of your workspace. You can learn more from them.</p>
<p>If you want to learn more about the Yuan, please read the <a href="/docs/category/guide---agent">Guide - Agent</a> section.</p>
<div class="theme-admonition theme-admonition-warning admonition_cM0L alert alert--warning"><div class="admonitionHeading_MeOY"><span class="admonitionIcon_iwjQ"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Disclaimer</div><div class="admonitionContent_KAnW"><p>These materials have been prepared solely for informational purposes and do not constitute a recommendation to make or dispose of any investment or engage in any particular investment strategy. These materials include general information and have not been tailored for any specific recipient or recipients. Information or data shown or used in these materials were obtained from sources believed to be reliable, but accuracy is not guaranteed.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/No-Trade-No-Life/Yuan/tree/main/ui/docs/docs/tutorial-basics/creating-your-first-strategy.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_YXXC" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_xcwf"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/category/getting-start"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Getting Start</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/tutorial-basics/real-world-trading"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Real world trading</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_BEMq thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#open-your-workspace" class="table-of-contents__link toc-highlight">Open your workspace</a></li><li><a href="#create-a-new-agent" class="table-of-contents__link toc-highlight">Create a new agent</a></li><li><a href="#time-to-hello-world" class="table-of-contents__link toc-highlight">Time to hello world</a></li><li><a href="#implement-the-strategy" class="table-of-contents__link toc-highlight">Implement the strategy</a><ul><li><a href="#get-the-data" class="table-of-contents__link toc-highlight">Get the data</a></li><li><a href="#build-the-strategy" class="table-of-contents__link toc-highlight">Build the strategy</a></li></ul></li><li><a href="#back-test-the-strategy" class="table-of-contents__link toc-highlight">Back-test the strategy</a></li><li><a href="#further-reading" class="table-of-contents__link toc-highlight">Further Reading</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/BRH2447DUV" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_NXki"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/No-Trade-No-Life/Yuan" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_NXki"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 No-Trade-No-life. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>